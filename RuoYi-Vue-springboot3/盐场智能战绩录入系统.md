# 盐场智能战绩录入系统设计说明

## 系统概述

本系统实现了盐场战报图片的智能识别和战绩自动匹配功能，大大提高了战绩录入效率。用户只需上传战报图片，系统会自动完成OCR识别、战绩数据提取、成员智能匹配，用户只需进行确认和少量校对工作。

## 核心功能

### 1. OCR服务集成
- 集成本地OCR服务（地址：http://localhost:5111）
- 支持图片文字提取
- 提供OCR服务状态监控和初始化功能

### 2. 智能战绩识别
- 自动解析战报图片中的日期、昵称和战绩数据
- 支持多行数据识别
- 提供识别结果查看和编辑功能

### 3. 成员智能匹配
- 基于昵称精确匹配俱乐部成员
- 支持模糊匹配和手动选择
- 显示匹配状态和成员详细信息

### 4. 批量处理功能
- 支持批量确认战绩记录
- 提供批量校对功能
- 支持手动调整匹配结果

## 技术实现

### 后端实现
1. **实体类**
   - `OcrResult`: OCR识别结果
   - `BattleMatchResult`: 战绩匹配结果

2. **控制器**
   - `IntelligentBattleController`: 智能战绩录入控制器

3. **服务层**
   - `IOcrResultService` / `OcrResultServiceImpl`
   - `IBattleMatchResultService` / `BattleMatchResultServiceImpl`

4. **数据访问层**
   - `OcrResultMapper` / `OcrResultMapper.xml`
   - `BattleMatchResultMapper` / `BattleMatchResultMapper.xml`

### 前端实现
1. **API接口**
   - `api/club/battle.js`: 提供OCR服务和战绩相关API调用

2. **页面组件**
   - `views/club/battle/index.vue`: 智能战绩录入主界面

### 数据库设计
1. **数据表**
   - `club_ocr_result`: 存储OCR识别结果
   - `club_battle_match_result`: 存储战绩匹配结果

## 使用流程

1. 启动OCR服务（端口5111）
2. 执行数据库脚本：`sql/intelligent_battle.sql`
3. 在系统中上传盐场战报图片
4. 系统自动识别文字并提取战绩数据
5. 系统智能匹配昵称到俱乐部成员
6. 用户检查匹配结果并进行必要调整
7. 批量确认战绩记录，保存到正式战绩表

## 后续优化方向

1. **增强识别精度**
   - 优化OCR参数配置
   - 支持多种战报格式

2. **提高匹配准确率**
   - 引入机器学习算法
   - 建立昵称映射表

3. **扩展功能**
   - 支持批量上传
   - 添加战绩统计分析
   - 实现战绩数据可视化